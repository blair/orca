@SET_MAKE@

AIXALLATOR_SUBDIR     = @AIXALLATOR_SUBDIR@
HPALLATOR_SUBDIR      = @HPALLATOR_SUBDIR@
ORCALLATOR_SUBDIR     = @ORCALLATOR_SUBDIR@
ORCA_SERVICES_SUBDIR  = @ORCA_SERVICES_SUBDIR@
PROCALLATOR_SUBDIR    = @PROCALLATOR_SUBDIR@

SUBDIRS               = $(AIXALLATOR_SUBDIR) \
                        $(HPALLATOR_SUBDIR) \
                        $(ORCALLATOR_SUBDIR) \
                        $(ORCA_SERVICES_SUBDIR) \
                        $(PROCALLATOR_SUBDIR)

all:	Makefile $(TARGETS)
	@for dir in $(SUBDIRS); do \
	  echo "cd $$dir && $(MAKE) CFLAGS=$(CFLAGS)"; \
	  (cd $$dir && $(MAKE) CFLAGS="$(CFLAGS)"); \
	done

orcallator_run_at_boot:
	cd orcallator && $(MAKE) orcallator_run_at_boot

orca_services_run_at_boot:
	cd orca_services && $(MAKE) orca_services_run_at_boot

procallator_run_at_boot:
	cd procallator && $(MAKE) procallator_run_at_boot

install:
	@for dir in $(SUBDIRS); do \
	  echo "cd $$dir && $(MAKE) CFLAGS=$(CFLAGS) install"; \
	  (cd $$dir && $(MAKE) CFLAGS="$(CFLAGS)" install); \
	done

clean:
	@for dir in $(SUBDIRS); do \
	  echo "cd $$dir && $(MAKE) CFLAGS=$(CFLAGS) clean"; \
	  (cd $$dir && $(MAKE) CFLAGS="$(CFLAGS)" clean); \
	done

distclean: clean
	@for dir in $(SUBDIRS); do \
	  echo "cd $$dir && $(MAKE) CFLAGS=$(CFLAGS) distclean"; \
	  (cd $$dir && $(MAKE) CFLAGS="$(CFLAGS)" distclean); \
	done
	$(RM) Makefile

Makefile: Makefile.in
	cd .. && CONFIG_FILES=data_gatherers/Makefile ./config.status
