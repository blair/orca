@SET_MAKE@

prefix		= @prefix@
exec_prefix	= @exec_prefix@
libdir		= @libdir@
INSTALL		= @INSTALL@
MKDIR		= @MKDIR@

all:		Makefile orca.gif.hex rrdtool.gif.hex

# Create a hex file representation of orca.gif that can be stored inside
# orca.pl.
orca.gif.hex: orca.gif
	perl -e 'while (sysread(STDIN, $$b, 35)){print unpack("h*", $$b),"\n"}' < $< > $@

# Create a hex file representation of rrdtool.gif that can be stored inside
# orca.pl.
rrdtool.gif.hex: rrdtool.gif
	perl -e 'while (sysread(STDIN, $$b, 35)){print unpack("h*", $$b),"\n"}' < $< > $@

install: all
	$(MKDIR) $(libdir)/Orca
	@for f in Orca/*.pm; do						\
		$(INSTALL) -m 0644 $$f $(libdir)/Orca;			\
		echo $(INSTALL) -m 0644 $$f $(libdir)/Orca;		\
	done
	@if test -d Orca/Config; then					\
		$(MKDIR) $(libdir)/Orca/Config;				\
		for f in Orca/Config/*.pm; do				\
			$(INSTALL) -m 0644 $$f $(libdir)/Orca/Config;	\
			echo $(INSTALL) -m 0644 $$f $(libdir)/Orca/Config; \
		done;							\
	fi

clean:

distclean: clean
	$(RM) Makefile

Makefile: Makefile.in
	cd .. && CONFIG_FILES=lib/Makefile ./config.status
