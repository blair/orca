<HTML>
<HEAD>
<TITLE>rrdxport</TITLE>
<LINK REV="made" HREF="mailto:karrer@iis.ee.ethz.ch">
</HEAD>

<BODY>

<A NAME="__index__"></A>
<!-- INDEX BEGIN -->
<!--

<UL>

	<LI><A HREF="#name">NAME</A></LI>
	<LI><A HREF="#synopsis">SYNOPSIS</A></LI>
	<LI><A HREF="#description">DESCRIPTION</A></LI>
	<UL>

		<LI><A HREF="#output format">Output format</A></LI>
	</UL>

	<LI><A HREF="#example 1">EXAMPLE 1</A></LI>
	<LI><A HREF="#example 2">EXAMPLE 2</A></LI>
	<LI><A HREF="#author">AUTHOR</A></LI>
</UL>
-->
<!-- INDEX END -->

<P>
<H1><A NAME="name">NAME</A></H1>
<P>rrdtool xport - Export data in XML format based on data from one or several RRD</P>
<div align="right"><a href="rrdxport.pdf">PDF</a> version.</div><P>
<HR>
<H1><A NAME="synopsis">SYNOPSIS</A></H1>
<P><STRONG>rrdtool</STRONG> <STRONG>xport</STRONG> 
[<STRONG>-s</STRONG>|<STRONG>--start</STRONG>&nbsp;<EM>seconds</EM>] 
[<STRONG>-e</STRONG>|<STRONG>--end</STRONG>&nbsp;<EM>seconds</EM>]
[<STRONG>-m</STRONG>|<STRONG>--maxrows</STRONG>&nbsp;<EM>rows</EM>]
[<STRONG>--step</STRONG>&nbsp;<EM>value</EM>]
[<STRONG>DEF:</STRONG><EM>vname</EM><STRONG>=</STRONG><EM>rrd</EM><STRONG>:</STRONG><EM>ds-name</EM><STRONG>:</STRONG><EM>CF</EM>]
[<STRONG>CDEF:</STRONG><EM>vname</EM><STRONG>=</STRONG><EM>rpn-expression</EM>]
[<STRONG>XPORT</STRONG><STRONG>:</STRONG><EM>vname</EM>[<STRONG>:</STRONG><EM>legend</EM>]]</P>
<P>
<HR>
<H1><A NAME="description">DESCRIPTION</A></H1>
<P>The <STRONG>xport</STRONG> functions main purpose is to write XML formatted
representation of the data stored in one or several <STRONG>RRD</STRONG>s. It
can also extract numerical reports.</P>
<P>If no <EM>XPORT</EM> statements are found, there will be no output.</P>
<DL>
<DT><STRONG><A NAME="item_seconds"><STRONG>-s</STRONG>|<STRONG>--start</STRONG> <EM>seconds</EM> (default end-1day)</A></STRONG><BR>
<DD>
The time when the exported range should begin. Time in seconds since
epoch (1970-01-01) is required. Negative numbers are relative to the
current time. By default one day worth of data will be printed.
See also AT-STYLE TIME SPECIFICATION section in the <EM>rrdfetch</EM>
documentation for a detailed explanation on how to specify time.
<P></P>
<DT><STRONG><STRONG>-e</STRONG>|<STRONG>--end</STRONG> <EM>seconds</EM> (default now)</STRONG><BR>
<DD>
The time when the exported range should end. Time in seconds since epoch.
See also AT-STYLE TIME SPECIFICATION section in the <EM>rrdfetch</EM>
documentation for a detailed explanation of ways to specify time.
<P></P>
<DT><STRONG><A NAME="item_rows"><STRONG>-m</STRONG>|<STRONG>--maxrows</STRONG> <EM>rows</EM> (default 400 rows)</A></STRONG><BR>
<DD>
This works like the <STRONG>-w</STRONG>|<STRONG>--width</STRONG> parameter of <EM>rrdgraph</EM>.
In fact it is exactly the same, but the parameter was renamed to
describe its purpose in this module. See <EM>rrdgraph</EM> documentation
for details.
<P></P>
<DT><STRONG><A NAME="item_value"><STRONG>--step</STRONG> <EM>value</EM> (default automatic)</A></STRONG><BR>
<DD>
See <EM>rrdgraph</EM> documentation.
<P></P>
<DT><STRONG><A NAME="item_DEF%3Avname%3Drrd%3Ads%2Dname%3ACF"><STRONG>DEF:</STRONG><EM>vname</EM><STRONG>=</STRONG><EM>rrd</EM><STRONG>:</STRONG><EM>ds-name</EM><STRONG>:</STRONG><EM>CF</EM></A></STRONG><BR>
<DD>
See <EM>rrdgraph</EM> documentation.
<P></P>
<DT><STRONG><A NAME="item_CDEF%3Avname%3Drpn%2Dexpression"><STRONG>CDEF:</STRONG><EM>vname</EM><STRONG>=</STRONG><EM>rpn-expression</EM></A></STRONG><BR>
<DD>
See <EM>rrdgraph</EM> documentation.
<P></P>
<DT><STRONG><A NAME="item_XPORT%3Avname%3A%3Alegend"><STRONG>XPORT:</STRONG><EM>vname</EM><STRONG>:</STRONG><STRONG>:</STRONG><EM>legend</EM></A></STRONG><BR>
<DD>
At least one <EM>XPORT</EM> statement should be present. The values
referenced by <EM>vname</EM> are printed. Optionally add a legend.
<P></P></DL>
<P>
<H2><A NAME="output format">Output format</A></H2>
<P>The output is enclosed in a <STRONG>xport</STRONG> element and contains two
blocks. The first block is enclosed by a <STRONG>meta</STRONG> element and
contains some meta data. The second block is enclosed by a 
<STRONG>data</STRONG> element and contains the data rows.</P>
<P>Let's assume that the <EM>xport</EM> command looks like this:</P>
<PRE>
  rrdtool xport \
          --start now-1h --end now \
          DEF:xx=host-inout.lo.rrd:output:AVERAGE \
          DEF:yy=host-inout.lo.rrd:input:AVERAGE \
          CDEF:aa=xx,yy,+,8,* \
          XPORT:xx:&quot;out bytes&quot; \
          XPORT:aa:&quot;in and out bits&quot;</PRE>
<P>The resulting meta data section (the values will depend on the
RRD characteristics):
</P>
<PRE>

  &lt;meta&gt;
    &lt;start&gt;1020611700&lt;/start&gt;
    &lt;step&gt;300&lt;/step&gt;
    &lt;end&gt;1020615600&lt;/end&gt;
    &lt;rows&gt;14&lt;/rows&gt;
    &lt;columns&gt;2&lt;/columns&gt;
    &lt;legend&gt;
      &lt;entry&gt;out bytes&lt;/entry&gt;
      &lt;entry&gt;in and out bits&lt;/entry&gt;
    &lt;/legend&gt;
  &lt;/meta&gt;</PRE>
<PRE>

The resulting data section:</PRE>
<PRE>
  &lt;data&gt;
    &lt;row&gt;&lt;t&gt;1020611700&lt;/t&gt;&lt;v&gt;3.4000000000e+00&lt;/v&gt;&lt;v&gt;5.4400000000e+01&lt;/v&gt;&lt;/row&gt;
    &lt;row&gt;&lt;t&gt;1020612000&lt;/t&gt;&lt;v&gt;3.4000000000e+00&lt;/v&gt;&lt;v&gt;5.4400000000e+01&lt;/v&gt;&lt;/row&gt;
    &lt;row&gt;&lt;t&gt;1020612300&lt;/t&gt;&lt;v&gt;3.4000000000e+00&lt;/v&gt;&lt;v&gt;5.4400000000e+01&lt;/v&gt;&lt;/row&gt;
    &lt;row&gt;&lt;t&gt;1020612600&lt;/t&gt;&lt;v&gt;3.4113333333e+00&lt;/v&gt;&lt;v&gt;5.4581333333e+01&lt;/v&gt;&lt;/row&gt;
    &lt;row&gt;&lt;t&gt;1020612900&lt;/t&gt;&lt;v&gt;3.4000000000e+00&lt;/v&gt;&lt;v&gt;5.4400000000e+01&lt;/v&gt;&lt;/row&gt;
    &lt;row&gt;&lt;t&gt;1020613200&lt;/t&gt;&lt;v&gt;3.4000000000e+00&lt;/v&gt;&lt;v&gt;5.4400000000e+01&lt;/v&gt;&lt;/row&gt;
    &lt;row&gt;&lt;t&gt;1020613500&lt;/t&gt;&lt;v&gt;3.4000000000e+00&lt;/v&gt;&lt;v&gt;5.4400000000e+01&lt;/v&gt;&lt;/row&gt;
    &lt;row&gt;&lt;t&gt;1020613800&lt;/t&gt;&lt;v&gt;3.4000000000e+00&lt;/v&gt;&lt;v&gt;5.4400000000e+01&lt;/v&gt;&lt;/row&gt;
    &lt;row&gt;&lt;t&gt;1020614100&lt;/t&gt;&lt;v&gt;3.4000000000e+00&lt;/v&gt;&lt;v&gt;5.4400000000e+01&lt;/v&gt;&lt;/row&gt;
    &lt;row&gt;&lt;t&gt;1020614400&lt;/t&gt;&lt;v&gt;3.4000000000e+00&lt;/v&gt;&lt;v&gt;5.4400000000e+01&lt;/v&gt;&lt;/row&gt;
    &lt;row&gt;&lt;t&gt;1020614700&lt;/t&gt;&lt;v&gt;3.7333333333e+00&lt;/v&gt;&lt;v&gt;5.9733333333e+01&lt;/v&gt;&lt;/row&gt;
    &lt;row&gt;&lt;t&gt;1020615000&lt;/t&gt;&lt;v&gt;3.4000000000e+00&lt;/v&gt;&lt;v&gt;5.4400000000e+01&lt;/v&gt;&lt;/row&gt;
    &lt;row&gt;&lt;t&gt;1020615300&lt;/t&gt;&lt;v&gt;3.4000000000e+00&lt;/v&gt;&lt;v&gt;5.4400000000e+01&lt;/v&gt;&lt;/row&gt;
    &lt;row&gt;&lt;t&gt;1020615600&lt;/t&gt;&lt;v&gt;NaN&lt;/v&gt;&lt;v&gt;NaN&lt;/v&gt;&lt;/row&gt;
  &lt;/data&gt;</PRE>
<P>
<HR>
<H1><A NAME="example 1">EXAMPLE 1</A></H1>
<PRE>
  rrdtool xport \
          DEF:out=if1-inouts.rrd:outoctets:AVERAGE \
          XPORT:out:&quot;out bytes&quot;</PRE>
<P>
<HR>
<H1><A NAME="example 2">EXAMPLE 2</A></H1>
<PRE>
  rrdtool xport \
          DEF:out1=if1-inouts.rrd:outoctets:AVERAGE \
          DEF:out2=if2-inouts.rrd:outoctets:AVERAGE \
          CDEF:sum=out1,out2,+ \
          XPORT:out1:&quot;if1 out bytes&quot; \
          XPORT:out2:&quot;if2 out bytes&quot; \
          XPORT:sum:&quot;output sum&quot;</PRE>
<P>
<HR>
<H1><A NAME="author">AUTHOR</A></H1>
<P>Tobias Oetiker &lt;<A HREF="mailto:oetiker@ee.ethz.ch">oetiker@ee.ethz.ch</A>&gt;</P>

</BODY>

</HTML>
