@SET_MAKE@

prefix            = @prefix@
exec_prefix       = @exec_prefix@
libdir            = @libdir@
INSTALL           = @INSTALL@
MKDIR             = @MKDIR@

all: Makefile \
     orca_logo.gif.hex \
     rrdtool_logo.gif.hex \
     rothschild_image_logo.png.hex

# Create a hex file representation of orca_logo.gif that can be stored
# inside orca.pl.
orca_logo.gif.hex: orca_logo.gif
	perl -e 'while (sysread(STDIN, $$b, 35)){print unpack("h*", $$b),"\n"}' < $< > $@

# Create a hex file representation of rrdtool_logo.gif that can be
# stored inside orca.pl.
rrdtool_logo.gif.hex: rrdtool_logo.gif
	perl -e 'while (sysread(STDIN, $$b, 35)){print unpack("h*", $$b),"\n"}' < $< > $@

# Create a hex file representation of rothschild_image_logo.png that
# can be stored inside orca.pl.
rothschild_image_logo.png.hex: rothschild_image_logo.png
	perl -e 'while (sysread(STDIN, $$b, 35)){print unpack("h*", $$b),"\n"}' < $< > $@

install: all
	$(MKDIR) $(libdir)/Orca
	@for f in Orca/*.pm; do \
	  $(INSTALL) -m 0644 $$f $(libdir)/Orca; \
	  echo $(INSTALL) -m 0644 $$f $(libdir)/Orca; \
	done
	@if test -d Orca/Config; then \
	  $(MKDIR) $(libdir)/Orca/Config; \
	  for f in Orca/Config/*.pm; do \
	    $(INSTALL) -m 0644 $$f $(libdir)/Orca/Config; \
	    echo $(INSTALL) -m 0644 $$f $(libdir)/Orca/Config; \
	  done; \
	fi

clean:

distclean: clean
	$(RM) Makefile

Makefile: Makefile.in
	cd .. && CONFIG_FILES=lib/Makefile ./config.status
