@SET_MAKE@

SUBDIRS               = orcallator \
                        Orca_Services

all:	Makefile $(TARGETS)
	@for dir in $(SUBDIRS); do \
	  echo "cd $$dir && $(MAKE) CFLAGS=$(CFLAGS)"; \
	  (cd $$dir && $(MAKE) CFLAGS="$(CFLAGS)"); \
	done

orcallator_run_at_boot:
	cd orcallator && $(MAKE) orcallator_run_at_boot

Orca_Services_run_at_boot:
	cd Orca_Services && $(MAKE) Orca_Services_run_at_boot

install:
	@for dir in $(SUBDIRS); do \
	  echo "cd $$dir && $(MAKE) CFLAGS=$(CFLAGS) install"; \
	  (cd $$dir && $(MAKE) CFLAGS="$(CFLAGS)" install); \
	done

clean:
	@for dir in $(SUBDIRS); do \
	  echo "cd $$dir && $(MAKE) CFLAGS=$(CFLAGS) clean"; \
	  (cd $$dir && $(MAKE) CFLAGS="$(CFLAGS)" clean); \
	done

distclean: clean
	@for dir in $(SUBDIRS); do \
	  echo "cd $$dir && $(MAKE) CFLAGS=$(CFLAGS) distclean"; \
	  (cd $$dir && $(MAKE) CFLAGS="$(CFLAGS)" distclean); \
	done
	$(RM) Makefile

Makefile: Makefile.in
	cd .. && CONFIG_FILES=data_gatherers/Makefile ./config.status
